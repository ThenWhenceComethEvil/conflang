# vim: ft=conf tw=80

2022-12-31
   Took the simple approach. Any user-defined type has 0 slots. May come back to
   bite me later, but it's not the most complicated thing to change.

   Do I begin work on the merge phase first? Or fix up the type checking and
   evaluation?

   Typecheck and evaluation first. Return to merging after.
   - [x] parser
   - [x] symtab   phase
   - [x] flatten  phase
   - [x] semantic phase
   - [ ] compiler phase
   - [ ] merge    phase


2023-01-11
   Need to throw an error on circular references. Something like this:

   function depth (items, level, visited, initial)
      if (not items or #items == 0) then
         return level
      end
      level = level + 1

      for _,node in ipairs(items) do
         if (visited[node]) then
            print("origin: " .. node .. ", anchor: " .. initial)
            os.exit(1)
         end

         visited[node] = true
         depth(unordered[node], level, visited, initial)
      end
   end

   unordered = {
      a = { 'b' },
      b = { 'c' },
      c = { 'd', 'c' },
   }

   for node,items in pairs(unordered) do
      depth(items, 0, { node=true }, node)
   end
